<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>لوحة تحكم المسؤول — المنتدى</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
  <style>
    /* * تنسيقات Admin Panel (معدلة ومحسنة)
     */
    :root{
      --bg: linear-gradient(180deg,#071014 0%, #0b1416 100%);
      --card-bg: rgba(255,255,255,0.05);
      --muted: #bfc9cb;
      --accent: #3498db;
      --gold: #f1c40f;
      --danger: #e74c3c;
      --success: #2ecc71;
    }
    *{box-sizing:border-box}
    html,body{
      height:100%;
      margin:0;
      font-family:'Cairo',system-ui,Arial;
      background:var(--bg);
      color:#e7eef0;
      -webkit-font-smoothing:antialiased;
      direction: rtl;
      text-align: right;
    }
    
    .container {
        max-width: 1200px;
        margin: 40px auto;
        padding: 0 20px;
    }
    
    h1 {
        color: var(--accent);
        font-size: 2.5rem;
        border-bottom: 2px solid var(--accent);
        padding-bottom: 10px;
        margin-bottom: 30px;
    }

    /* هيكل لوحة التحكم */
    .admin-dashboard {
        display: grid;
        grid-template-columns: 1fr;
        gap: 30px;
    }
    .panel-card {
        background: var(--card-bg);
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        border: 1px solid rgba(255,255,255,0.05);
    }
    .panel-card h2 {
        color: #fff;
        font-size: 1.8rem;
        margin-top: 0;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        padding-bottom: 10px;
        margin-bottom: 20px;
    }

    /* الإدخالات والأزرار العامة */
    input[type="text"], input[type="number"] {
        padding: 10px 15px;
        border-radius: 8px;
        border: 1px solid rgba(255,255,255,0.1);
        background: rgba(0,0,0,0.2);
        color: #fff;
        font-family: inherit;
        font-size: 1em;
        outline: none;
    }
    input::placeholder { color: rgba(255,255,255,0.5); }

    .action-btn {
        padding: 10px 15px;
        border-radius: 8px;
        font-weight: 700;
        cursor: pointer;
        color: #fff;
        transition: opacity 0.2s, transform 0.1s;
    }
    .action-btn:hover:not(:disabled) { opacity: 0.9; }
    .action-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    
    /* رسالة التحميل والخطأ */
    .message-box {
        text-align: center;
        padding: 50px 20px;
        color: var(--muted);
        font-size: 1.2em;
        background: rgba(0,0,0,0.1);
        border-radius: 12px;
    }
    .message-box i { margin-inline-end: 10px; }
    
    /* تخطيط الإحصائيات */
    .stat-box i { margin-inline-end: 10px; }
    
    /* ====== Toast Notifications ====== */
    .toast {
      position: fixed; bottom: 25px; right: 25px; padding: 12px 18px; color: #fff;
      background: #1c272a; border-radius: 8px; box-shadow: 0 8px 25px rgba(0,0,0,0.7);
      z-index: 10000; opacity: 0; transition: opacity 0.4s ease, transform 0.4s ease;
      transform: translateX(100%); font-weight: 600; min-width: 200px; text-align: right;
      border-right: 4px solid #fff; 
    }

    @media (max-width: 768px) {
        .stat-grid { grid-template-columns: 1fr !important; }
        .admin-search { flex-direction: column; }
        .action-btn { width: 100%; }
        .action-btn-group { flex-direction: column; gap: 10px !important; }
        .container { margin: 20px auto; }
        .panel-card h2 { font-size: 1.5rem; }
    }
  </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-screwdriver-wrench"></i> لوحة تحكم المسؤول</h1>
        
        <div id="authCheck" class="message-box">
            <i id="authIcon" class="fas fa-spinner fa-spin"></i>
            <span id="authStatus">جارٍ التحقق من صلاحيات المسؤول...</span>
        </div>
        
        <div id="adminDashboard" class="admin-dashboard" style="display:none;">
            
            <section id="statsOverview" class="panel-card">
                <h2>نظرة عامة</h2>
                <div class="stat-grid" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:20px;">
                    <div class="stat-box" style="background:#2C3E50; padding:15px; border-radius:10px;">
                        <i class="fas fa-users" style="color:var(--accent); font-size:1.8rem; margin-bottom:10px;"></i>
                        <p style="color:var(--muted); margin:0;">إجمالي الأعضاء</p>
                        <strong id="totalUsersCount" style="font-size:2.5rem; color:#fff;">...</strong>
                    </div>
                    <div class="stat-box" style="background:#2C3E50; padding:15px; border-radius:10px;">
                        <i class="fas fa-star" style="color:var(--gold); font-size:1.8rem; margin-bottom:10px;"></i>
                        <p style="color:var(--muted); margin:0;">إجمالي النجوم الموزعة</p>
                        <strong id="totalStarsCount" style="font-size:2.5rem; color:#fff;">...</strong>
                    </div>
                </div>
            </section>

            <section id="userManagementPanel" class="panel-card">
                <h2>البحث عن مستخدم وإدارته</h2>
                
                <div id="userSearchTool" class="admin-search" style="display:flex; gap:10px; margin-bottom:20px;">
                    <input type="text" id="userSearchInput" placeholder="ادخل اليوزر المسجل به أو UID" style="flex-grow:1;" />
                    <button id="searchUserBtn" class="action-btn" style="background:var(--accent);"><i class="fas fa-search"></i> بحث</button>
                </div>
                
                <div id="userProfileDisplay" style="border:1px dashed rgba(255,255,255,0.1); padding:20px; border-radius:10px; display:none;">
                    <p style="color:var(--muted); text-align:center;">
                        <i class="fas fa-info-circle"></i> ابحث عن مستخدم أولاً لعرض بياناته هنا.
                    </p>
                </div>

                <div id="userControlActions" style="margin-top:25px; border-top:1px solid rgba(255,255,255,0.1); padding-top:20px; display:none;">
                    <h3 style="color:#fff; margin-bottom:15px;">إجراءات المسؤول على <span id="targetUsername" style="color:var(--gold);">[User]</span></h3>
                    
                    <div class="action-btn-group" style="display:flex; gap:10px; margin-bottom:15px;">
                        <input type="number" id="banDurationInput" placeholder="مدة الحظر (بالأيام)" style="width:120px;" />
                        <button id="tempBanBtn" class="action-btn" style="background:var(--danger); flex:1;"><i class="fas fa-hand-paper"></i> حظر مؤقت</button>
                        <button id="permanentBanBtn" class="action-btn" style="background:#c0392b; flex:1;"><i class="fas fa-user-lock"></i> باند نهائي</button>
                    </div>

                    <button id="unbanBtn" class="action-btn" style="background:var(--success); margin-bottom:15px; width:100%; display:none;"><i class="fas fa-unlock"></i> فك الحظر والباند</button>

                    <div class="action-btn-group" style="display:flex; gap:10px; margin-bottom:15px; border-top:1px dashed rgba(255,255,255,0.1); padding-top:15px;">
                        <input type="number" id="starsAmountInput" placeholder="عدد النجوم" style="width:120px;" />
                        <button id="addStarsBtn" class="action-btn" style="background:#2ecc71; flex:1;"><i class="fas fa-plus-circle"></i> إضافة</button>
                        <button id="removeStarsBtn" class="action-btn" style="background:#e67e22; flex:1;"><i class="fas fa-minus-circle"></i> سحب</button>
                        <button id="setStarsBtn" class="action-btn" style="background:#8e44ad; flex:1;"><i class="fas fa-exchange-alt"></i> تعيين</button>
                    </div>
                </div>

            </section>

            <section id="globalActions" class="panel-card">
                <h2>أدوات التحكم الشاملة</h2>
                
                <div style="margin-bottom:20px;">
                    <h3 style="color:#fff; margin-bottom:10px;">توزيع نجوم جماعي</h3>
                    <div class="action-btn-group" style="display:flex; gap:10px;">
                        <input type="number" id="globalStarsAmount" placeholder="عدد النجوم للإضافة للجميع" style="flex:1;" />
                        <button id="distributeStarsBtn" class="action-btn" style="background:#27ae60;"><i class="fas fa-broadcast-tower"></i> توزيع للكل</button>
                    </div>
                </div>

                <div>
                    <h3 style="color:#fff; margin-bottom:10px;">توليد Promo Code</h3>
                    <div class="action-btn-group" style="display:flex; gap:10px;">
                        <input type="text" id="promoCodeName" placeholder="اسم الكود (مثل FALL2025)" style="flex:1;" />
                        <input type="number" id="promoCodeStars" placeholder="نجوم الكود" style="width:120px;" />
                        <button id="generatePromoBtn" class="action-btn" style="background:#f39c12;"><i class="fas fa-gift"></i> توليد</button>
                    </div>
                    <p id="generatedCodeFeedback" style="color:var(--gold); margin-top:10px;"></p>
                </div>

            </section>
        </div>
    </div>
    
    <script type="module" src="admin.js"></script>
</body>
</html>
